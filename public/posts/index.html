<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Posts | Hervé Delaunay</title>
<meta name="keywords" content="">
<meta name="description" content="Posts - Hervé Delaunay">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/posts/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.08f7d74f0ada0f975d29ae436285b61ed7a719d05f350cb888d00341642995a2.css" integrity="sha256-CPfXTwraD5ddKa5DYoW2HtenGdBfNQy4iNADQWQplaI=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/posts/index.xml">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Hervé Delaunay (Alt + H)">Hervé Delaunay</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/aboutme/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="Index">
                    <span>Index</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header">
  <h1>
    Posts
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Secure GitOps : Exposing Internal Kubernetes Services With Cloudflare Tunnels
    </h2>
  </header>
  <div class="entry-content">
    <p>It has been some time that I’ve been searching for a way to expose my self-hosted apps without opening my network to the internet. I’ve finally found the solution : Cloudflare tunnels. They only require an outbound connection and remove the need to expose any ports directly.
Requirements:
A Cloudflare-managed domain (you can also transfer an existing domain to Cloudflare) A Kubernetes cluster (in my case, managed with FluxCD following GitOps best practices) Authenticating and creating the tunnel First, download cloudflared on your machine
...</p>
  </div>
  <footer class="entry-footer"><span title='2025-09-21 12:29:44 +0200 CEST'>September 21, 2025</span></footer>
  <a class="entry-link" aria-label="post link to Secure GitOps : Exposing Internal Kubernetes Services With Cloudflare Tunnels" href="http://localhost:1313/posts/secure-gitops--exposing-internal-kubernetes-services-with-cloudflare-tunnels/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Mastering Helm : A Journey to Dynamic Secret Generation
    </h2>
  </header>
  <div class="entry-content">
    <p>In the world of Kubernetes and Helm, managing secrets securely and efficiently is crucial, especially when dealing with production databases. This article chronicles my journey to implement a dynamic secret generation mechanism for a StatefulSet’s database container using Helm.
My objective was to generate a password for the database container of a StatefulSet using Helm. The requirements were to create the secret during the initial installation, to reuse the same secret when upgrading the release and to ensure the secret persists even if the release is deleted
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-08-12 22:23:13 +0200 CEST'>August 12, 2024</span></footer>
  <a class="entry-link" aria-label="post link to Mastering Helm : A Journey to Dynamic Secret Generation" href="http://localhost:1313/posts/mastering-helm--a-journey-to-dynamic-secret-generation/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Which Cni Is Running in My Cluster ?
    </h2>
  </header>
  <div class="entry-content">
    <p>Today a colleague of mine who is new to Kubernetes asked me what was the CNI running on our production cluster, I knew the answer but I wanted to doublecheck, just to see if I could climb up to the source of truth.
My first reflex was to search in the kube-system namespace for pods with a CNI-like name. And I quickly found what I was looking for :
With this I was pretty sure Antrea was the chosen CNI, but I knew there were other ways to verify it.
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-07-23 22:28:12 +0200 CEST'>July 23, 2024</span></footer>
  <a class="entry-link" aria-label="post link to Which Cni Is Running in My Cluster ?" href="http://localhost:1313/posts/which-cni-is-running-in-my-cluster/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Adding TLS to Your Ingress Traffic
    </h2>
  </header>
  <div class="entry-content">
    <p>Today at my job I managed to get our new product up and running on kubernetes, deployment and statefulsets are working but I wanted to test the app’s behavior while accessing it from the outside. As we have multiple services running on the cluster and as we want to secure the connection through TLS it is best to use an Ingress (resources and controllers). I already did the Ingress controller setup earlier, using Ingress-nginx-controller so I just had to create an Ingress-resources and I wanted to discuss about my process here.
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-06-22 10:26:00 +0200 CEST'>June 22, 2024</span></footer>
  <a class="entry-link" aria-label="post link to Adding TLS to Your Ingress Traffic" href="http://localhost:1313/posts/adding-tls-to-your-ingress-traffic/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Pull Images From Your Harbor Registry With Kubernetes
    </h2>
  </header>
  <div class="entry-content">
    <p>Pulling images from a private registry with kubernetes In this example I am going to use Harbor.
For the sake of best practices and security we first have to create a robot account on harbor :
Then select the harbor repo on which the robot account will have these permissions :
You then have a confirmation message from harbor, keep the secret : we will register it into a kubernetes secret in our cluster.
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-06-09 22:24:35 +0200 CEST'>June 9, 2024</span></footer>
  <a class="entry-link" aria-label="post link to Pull Images From Your Harbor Registry With Kubernetes" href="http://localhost:1313/posts/pull-images-from-your-harbor-registry-with-kubernetes/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Routing Traffic Within Your Kubernetes Cluster : Ingress-Nginx Controller
    </h2>
  </header>
  <div class="entry-content">
    <p>I recently had to setup an Ingress in one of the Kubernetes cluster of my job, so I wrote a short explanation for my colleagues that are not aware of Kubernetes Ingresses and since it provide usefull explanations on it I figured I’ll also share it here :
Classic Ingress in Kubernetes An Ingress in Kubernetes is an object that makes microservices available outside the cluster. It routes incoming requests to the appropriate services, much like a traditional load balancer.
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-05-13 21:46:33 +0200 CEST'>May 13, 2024</span></footer>
  <a class="entry-link" aria-label="post link to Routing Traffic Within Your Kubernetes Cluster : Ingress-Nginx Controller" href="http://localhost:1313/posts/routing-traffic-within-your-kubernetes-cluster--ingress-nginx-controller/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Optimizing Docker Images Size
    </h2>
  </header>
  <div class="entry-content">
    <p>When you try to optimize the size of an image it is possible to display the size of every layers :
docker history &lt;image-id&gt; For example :
(ins)❯ docker history 7383c266ef25 IMAGE CREATED CREATED BY SIZE COMMENT 7383c266ef25 12 days ago CMD [&#34;nginx&#34; &#34;-g&#34; &#34;daemon off;&#34;] 0B buildkit.dockerfile.v0 &lt;missing&gt; 12 days ago STOPSIGNAL SIGQUIT 0B buildkit.dockerfile.v0 &lt;missing&gt; 12 days ago EXPOSE map[80/tcp:{}] 0B buildkit.dockerfile.v0 &lt;missing&gt; 12 days ago ENTRYPOINT [&#34;/docker-entrypoint.sh&#34;] 0B buildkit.dockerfile.v0 &lt;missing&gt; 12 days ago COPY 30-tune-worker-processes.sh /docker-ent… 4.62kB buildkit.dockerfile.v0 &lt;missing&gt; 12 days ago COPY 20-envsubst-on-templates.sh /docker-ent… 3.02kB buildkit.dockerfile.v0 &lt;missing&gt; 12 days ago COPY 15-local-resolvers.envsh /docker-entryp… 336B buildkit.dockerfile.v0 &lt;missing&gt; 12 days ago COPY 10-listen-on-ipv6-by-default.sh /docker… 2.12kB buildkit.dockerfile.v0 &lt;missing&gt; 12 days ago COPY docker-entrypoint.sh / # buildkit 1.62kB buildkit.dockerfile.v0 &lt;missing&gt; 12 days ago RUN /bin/sh -c set -x &amp;&amp; groupadd --syst… 113MB buildkit.dockerfile.v0 &lt;missing&gt; 12 days ago ENV PKG_RELEASE=1~bookworm 0B buildkit.dockerfile.v0 &lt;missing&gt; 12 days ago ENV NJS_RELEASE=2~bookworm 0B buildkit.dockerfile.v0 &lt;missing&gt; 12 days ago ENV NJS_VERSION=0.8.4 0B buildkit.dockerfile.v0 &lt;missing&gt; 12 days ago ENV NGINX_VERSION=1.25.5 0B buildkit.dockerfile.v0 &lt;missing&gt; 12 days ago LABEL maintainer=NGINX Docker Maintainers &lt;d… 0B buildkit.dockerfile.v0 &lt;missing&gt; 12 days ago /bin/sh -c #(nop) CMD [&#34;bash&#34;] 0B &lt;missing&gt; 12 days ago /bin/sh -c #(nop) ADD file:4b1be1de1a1e5aa60… 74.8MB </p>
  </div>
  <footer class="entry-footer"><span title='2024-05-06 15:27:12 +0200 CEST'>May 6, 2024</span></footer>
  <a class="entry-link" aria-label="post link to Optimizing Docker Images Size" href="http://localhost:1313/posts/optimizing-docker-images-size/"></a>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Hervé Delaunay</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
