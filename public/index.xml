<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Hervé Delaunay</title>
    <link>http://localhost:1313/</link>
    <description>Recent content on Hervé Delaunay</description>
    <generator>Hugo -- 0.150.0</generator>
    <language>en-us</language>
    <lastBuildDate>Sun, 21 Sep 2025 12:29:44 +0200</lastBuildDate>
    <atom:link href="http://localhost:1313/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Secure GitOps : Exposing Internal Kubernetes Services With Cloudflare Tunnels</title>
      <link>http://localhost:1313/posts/secure-gitops--exposing-internal-kubernetes-services-with-cloudflare-tunnels/</link>
      <pubDate>Sun, 21 Sep 2025 12:29:44 +0200</pubDate>
      <guid>http://localhost:1313/posts/secure-gitops--exposing-internal-kubernetes-services-with-cloudflare-tunnels/</guid>
      <description>&lt;p&gt;It has been some time that I&amp;rsquo;ve been searching for a way to expose my self-hosted apps without opening my network to the internet. I&amp;rsquo;ve finally found the solution : Cloudflare tunnels. They only require an outbound connection and remove the need to expose any ports directly.&lt;/p&gt;
&lt;p&gt;Requirements:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A Cloudflare-managed domain (you can also transfer an existing domain to Cloudflare)&lt;/li&gt;
&lt;li&gt;A Kubernetes cluster (in my case, managed with FluxCD following GitOps best practices)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;authenticating-and-creating-the-tunnel&#34;&gt;Authenticating and creating the tunnel&lt;/h2&gt;
&lt;p&gt;First, &lt;a href=&#34;https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/downloads/&#34;&gt;download cloudflared&lt;/a&gt; on your machine&lt;/p&gt;</description>
    </item>
    <item>
      <title>Mastering Helm : A Journey to Dynamic Secret Generation</title>
      <link>http://localhost:1313/posts/mastering-helm--a-journey-to-dynamic-secret-generation/</link>
      <pubDate>Mon, 12 Aug 2024 22:23:13 +0200</pubDate>
      <guid>http://localhost:1313/posts/mastering-helm--a-journey-to-dynamic-secret-generation/</guid>
      <description>&lt;p&gt;In the world of Kubernetes and Helm, managing secrets securely and efficiently is crucial, especially when dealing with production databases. This article chronicles my journey to implement a dynamic secret generation mechanism for a StatefulSet&amp;rsquo;s database container using Helm.&lt;/p&gt;
&lt;p&gt;My objective was to generate a password for the database container of a StatefulSet using Helm. The requirements were to create the secret during the initial installation, to reuse the same secret when upgrading the release and to ensure the secret persists even if the release is deleted&lt;/p&gt;</description>
    </item>
    <item>
      <title>Which Cni Is Running in My Cluster ?</title>
      <link>http://localhost:1313/posts/which-cni-is-running-in-my-cluster/</link>
      <pubDate>Tue, 23 Jul 2024 22:28:12 +0200</pubDate>
      <guid>http://localhost:1313/posts/which-cni-is-running-in-my-cluster/</guid>
      <description>&lt;p&gt;Today a colleague of mine who is new to Kubernetes asked me what was the CNI running on our production cluster, I knew the answer but I wanted to doublecheck, just to see if I could climb up to the source of truth.&lt;/p&gt;
&lt;p&gt;My first reflex was to search in the kube-system namespace for pods with a CNI-like name. And I quickly found what I was looking for :&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;cni-1&#34; loading=&#34;lazy&#34; src=&#34;http://localhost:1313/which-cni-1.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;With this I was pretty sure &lt;strong&gt;Antrea&lt;/strong&gt; was the chosen CNI, but I knew there were other ways to verify it.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Adding TLS to Your Ingress Traffic</title>
      <link>http://localhost:1313/posts/adding-tls-to-your-ingress-traffic/</link>
      <pubDate>Sat, 22 Jun 2024 10:26:00 +0200</pubDate>
      <guid>http://localhost:1313/posts/adding-tls-to-your-ingress-traffic/</guid>
      <description>&lt;p&gt;Today at my job I managed to get our new product up and running on kubernetes, deployment and statefulsets are working but I wanted to test the app&amp;rsquo;s behavior while accessing it from the outside. As we have multiple services running on the cluster and as we want to secure the connection through TLS it is best to use an Ingress (resources and controllers). I already did the Ingress controller setup earlier, using &lt;a href=&#34;https://kubernetes.github.io/ingress-nginx/&#34;&gt;Ingress-nginx-controller&lt;/a&gt; so I just had to create an Ingress-resources and I wanted to discuss about my process here.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Pull Images From Your Harbor Registry With Kubernetes</title>
      <link>http://localhost:1313/posts/pull-images-from-your-harbor-registry-with-kubernetes/</link>
      <pubDate>Sun, 09 Jun 2024 22:24:35 +0200</pubDate>
      <guid>http://localhost:1313/posts/pull-images-from-your-harbor-registry-with-kubernetes/</guid>
      <description>&lt;h2 id=&#34;pulling-images-from-a-private-registry-with-kubernetes&#34;&gt;Pulling images from a private registry with kubernetes&lt;/h2&gt;
&lt;p&gt;In this example I am going to use Harbor.&lt;/p&gt;
&lt;p&gt;For the sake of best practices and security we first have to create a robot account on harbor :&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;harbor-1&#34; loading=&#34;lazy&#34; src=&#34;http://localhost:1313/harbor-1.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;harbor-2&#34; loading=&#34;lazy&#34; src=&#34;http://localhost:1313/harbor-2.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;harbor-3&#34; loading=&#34;lazy&#34; src=&#34;http://localhost:1313/harbor-3.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;Then select the harbor repo on which the robot account will have these permissions :&lt;/p&gt;
&lt;p&gt;&lt;img alt=&#34;harbor-4&#34; loading=&#34;lazy&#34; src=&#34;http://localhost:1313/harbor-4.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;You then have a confirmation message from harbor, keep the secret : we will register it into a kubernetes secret in our cluster.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Routing Traffic Within Your Kubernetes Cluster : Ingress-Nginx Controller</title>
      <link>http://localhost:1313/posts/routing-traffic-within-your-kubernetes-cluster--ingress-nginx-controller/</link>
      <pubDate>Mon, 13 May 2024 21:46:33 +0200</pubDate>
      <guid>http://localhost:1313/posts/routing-traffic-within-your-kubernetes-cluster--ingress-nginx-controller/</guid>
      <description>&lt;p&gt;I recently had to setup an Ingress in one of the Kubernetes cluster of my job, so I wrote a short explanation for my colleagues that are not aware of Kubernetes Ingresses and since it provide usefull explanations on it I figured I&amp;rsquo;ll also share it here :&lt;/p&gt;
&lt;h2 id=&#34;classic-ingress-in-kubernetes&#34;&gt;Classic Ingress in Kubernetes&lt;/h2&gt;
&lt;p&gt;An Ingress in Kubernetes is an object that makes microservices available outside the cluster. It routes incoming requests to the appropriate services, much like a traditional load balancer.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Optimizing Docker Images Size</title>
      <link>http://localhost:1313/posts/optimizing-docker-images-size/</link>
      <pubDate>Mon, 06 May 2024 15:27:12 +0200</pubDate>
      <guid>http://localhost:1313/posts/optimizing-docker-images-size/</guid>
      <description>&lt;p&gt;When you try to optimize the size of an image it is possible to display the size of every layers :&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker history &amp;lt;image-id&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;For example :&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;ins&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;❯ docker history 7383c266ef25
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;IMAGE          CREATED       CREATED BY                                      SIZE      COMMENT
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;7383c266ef25   &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   CMD &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;nginx&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;-g&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;daemon off;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;                0B        buildkit.dockerfile.v0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   STOPSIGNAL SIGQUIT                              0B        buildkit.dockerfile.v0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   EXPOSE map&lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;80/tcp:&lt;span style=&#34;color:#f92672&#34;&gt;{}]&lt;/span&gt;                           0B        buildkit.dockerfile.v0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   ENTRYPOINT &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/docker-entrypoint.sh&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;            0B        buildkit.dockerfile.v0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   COPY 30-tune-worker-processes.sh /docker-ent…   4.62kB    buildkit.dockerfile.v0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   COPY 20-envsubst-on-templates.sh /docker-ent…   3.02kB    buildkit.dockerfile.v0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   COPY 15-local-resolvers.envsh /docker-entryp…   336B      buildkit.dockerfile.v0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   COPY 10-listen-on-ipv6-by-default.sh /docker…   2.12kB    buildkit.dockerfile.v0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   COPY docker-entrypoint.sh / &lt;span style=&#34;color:#75715e&#34;&gt;# buildkit          1.62kB    buildkit.dockerfile.v0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   RUN /bin/sh -c set -x     &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; groupadd --syst…   113MB     buildkit.dockerfile.v0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   ENV PKG_RELEASE&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;1~bookworm                      0B        buildkit.dockerfile.v0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   ENV NJS_RELEASE&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;2~bookworm                      0B        buildkit.dockerfile.v0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   ENV NJS_VERSION&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;0.8.4                           0B        buildkit.dockerfile.v0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   ENV NGINX_VERSION&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;1.25.5                        0B        buildkit.dockerfile.v0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   LABEL maintainer&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;NGINX Docker Maintainers &amp;lt;d…   0B        buildkit.dockerfile.v0
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop)  CMD [&amp;#34;bash&amp;#34;]                 0B&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&amp;lt;missing&amp;gt;      &lt;span style=&#34;color:#ae81ff&#34;&gt;12&lt;/span&gt; days ago   /bin/sh -c &lt;span style=&#34;color:#75715e&#34;&gt;#(nop) ADD file:4b1be1de1a1e5aa60…   74.8MB&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    <item>
      <title></title>
      <link>http://localhost:1313/aboutme/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/aboutme/</guid>
      <description>&lt;p&gt;I&amp;rsquo;m a french DevOps engineer that looks for perfecting his craft.&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
